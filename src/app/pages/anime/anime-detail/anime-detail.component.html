<div class="card">
    <div class="mb-2">
        <p-button
            label="Home"
            [rounded]="true"
            (click)="backtoHome()"
        ></p-button>
    </div>

    <div class="flex flex-wrap align-items-center justify-content-center">
        <img
            [src]="anime.images.jpg.large_image_url"
            alt=""
            [style]="{ width: '18rem' }"
        />

        <div class="pt-3">
            <div class="text-center">
                <h1 class="text-primary">{{ anime.title }}</h1>
                <small>{{ anime.title_japanese }}</small>
            </div>

            <div class="pl-2 pt-2">
                <h3>Background</h3>
                <p>{{ anime.background }}</p>
            </div>

            <div class="pl-2">
                <h3>Synopsis</h3>
                <p>{{ anime.synopsis }}</p>
            </div>
            <div class="pl-2 pt-2">
                <a [href]="anime.url">MyAnimeList</a>
            </div>
        </div>
    </div>

    <div>
        <h3 class="mt-5">Statistics</h3>
        <p-table
            responsiveLayout="stack"
            scrollHeight="flex"
            [tableStyle]="{ 'min-width': '18rem' }"
            [value]="[statistics]"
            styleClass="p-datatable-gridlines border-1 surface-border border-round"
        >
            <ng-template pTemplate="header">
                <tr>
                    <th>Watching</th>
                    <th>Completed</th>
                    <th>On Hold</th>
                    <th>Dropped</th>
                    <th>Plan to Watch</th>
                    <th>Total</th>
                </tr>
            </ng-template>
            <ng-template
                pTemplate="body"
                let-rowData="rowData"
                sortMode="multiple"
            >
                <tr style="cursor: pointer">
                    <td>
                        <span class="p-column-title"> Watching </span>
                        {{ statistics.watching }}
                    </td>
                    <td>
                        <span class="p-column-title"> Completed </span>
                        {{ statistics.completed }}
                    </td>
                    <td>
                        <span class="p-column-title"> On Hold </span>
                        {{ statistics.on_hold }}
                    </td>
                    <td>
                        <span class="p-column-title"> Dropped </span>
                        {{ statistics.dropped }}
                    </td>
                    <td>
                        <span class="p-column-title"> Plan to Watch </span>
                        {{ statistics.plan_to_watch }}
                    </td>
                    <td>
                        <span class="p-column-title"> Total </span>
                        {{ statistics.total }}
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>

    <div class="mt-5">
        <h3>Episodes</h3>

        <p-table
            responsiveLayout="stack"
            scrollHeight="flex"
            [value]="episodes"
            [tableStyle]="{ 'min-width': '18rem' }"
            [paginator]="true"
            [rows]="20"
            [rowsPerPageOptions]="[20, 40, 80]"
            styleClass="p-datatable-gridlines border-1 surface-border border-round"
        >
            <ng-template pTemplate="caption">
                <div class="flex align-items-center justify-content-between">
                    Episodi
                </div>
            </ng-template>
            <ng-template pTemplate="header">
                <tr>
                    <th>N.</th>
                    <th>Title</th>
                    <th>Aired</th>
                    <th>Score</th>
                    <th>Forum URL</th>
                    <th>URL</th>
                </tr>
            </ng-template>
            <ng-template
                pTemplate="body"
                let-episode
                let-rowData="rowData"
                sortMode="multiple"
            >
                <tr
                    (click)="episodeDetail(episode.id)"
                    style="cursor: pointer"
                    class="transition-colors transition-duration-500 bg-none hover:bg-primary"
                >
                    <td>
                        <span class="p-column-title"> N. </span>
                        {{ episode.id }}
                    </td>
                    <td>
                        <span class="p-column-title"> Title </span>
                        {{ episode.title }}
                    </td>

                    <td>
                        <span class="p-column-title"> Aired </span>
                        {{ episode.aired | date }}
                    </td>
                    <td>
                        <span class="p-column-title"> Score </span>
                        {{ episode.score }}
                    </td>
                    <td>
                        <span class="p-column-title"> Forum UR </span>
                        <a style="color: orange" [href]="episode.forum_url"
                            >Forum URL</a
                        >
                    </td>
                    <td>
                        <span class="p-column-title"> URL </span>
                        <a style="color: orange" [href]="episode.url"
                            >Link Episodio</a
                        >
                    </td>
                </tr>
            </ng-template>
            <ng-template pTemplate="paginatorleft"> </ng-template>
            <ng-template pTemplate="paginatorright"> </ng-template>
        </p-table>
    </div>
    <p-scrollTop
        target="window"
        styleClass="custom-scrolltop"
        [threshold]="100"
        icon="pi pi-arrow-up"
    ></p-scrollTop>
</div>
