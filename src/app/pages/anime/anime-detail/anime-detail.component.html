<div class="card m-5">
    <div class="mb-2">
        <p-button
            label="Home"
            [rounded]="true"
            (click)="backtoHome()"
        ></p-button>
    </div>

    <div class="flex">
        <div>
            <img [src]="anime.images.jpg.large_image_url" alt="" />
        </div>
        <div>
            <h1 class="mt-2 ml-5">{{ anime.title }}</h1>
            <small class="ml-5">{{ anime.title_japanese }}</small>

            <div class="mt-4 ml-5">
                <h3>Background</h3>
                <p>{{ anime.background }}</p>
            </div>

            <div class="mt-4 ml-5">
                <h3>Synopsis</h3>
                <p>{{ anime.synopsis }}</p>
            </div>
            <div class="mt-6 ml-5">
                <a [href]="anime.url">MyAnimeList</a>
            </div>
        </div>
    </div>

    <div>
        <h3 class="mt-5">Statistics</h3>
        <p-table [tableStyle]="{ 'min-width': '60rem' }" [value]="[statistics]">
            <ng-template pTemplate="header">
                <tr>
                    <th>Watching</th>
                    <th>Completed</th>
                    <th>On Hold</th>
                    <th>Dropped</th>
                    <th>Plan to Watch</th>
                    <th>Total</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body">
                <tr style="cursor: pointer">
                    <td>{{ statistics.watching }}</td>
                    <td>{{ statistics.completed }}</td>
                    <td>{{ statistics.on_hold }}</td>
                    <td>{{ statistics.dropped }}</td>
                    <td>{{ statistics.plan_to_watch }}</td>
                    <td>{{ statistics.total }}</td>
                </tr>
            </ng-template>
        </p-table>
    </div>

    <div class="mt-5">
        <h3>Episodes</h3>

        <p-table
            [value]="episodes"
            [tableStyle]="{ 'min-width': '60rem' }"
            [paginator]="true"
            [rows]="20"
            [rowsPerPageOptions]="[20, 40, 80]"
        >
            <ng-template pTemplate="caption">
                <div class="flex align-items-center justify-content-between">
                    Episodi
                </div>
            </ng-template>
            <ng-template pTemplate="header">
                <tr>
                    <th>N.</th>
                    <th>Title</th>
                    <th>Title Japanese</th>
                    <th>Title Romanji</th>
                    <th>Aired</th>
                    <th>Score</th>
                    <th>Forum URL</th>
                    <th>URL</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-episode>
                <tr
                    (click)="episodeDetail(episode.id)"
                    style="cursor: pointer"
                    class="transition-colors transition-duration-500 bg-none hover:bg-primary"
                >
                    <td>{{ episode.id }}</td>
                    <td>{{ episode.title }}</td>
                    <td>{{ episode.title_japanese }}</td>
                    <td>{{ episode.title_romanji }}</td>
                    <td>{{ episode.aired | date }}</td>
                    <td>{{ episode.score }}</td>
                    <td>
                        <a style="color: orange" [href]="episode.forum_url"
                            >Forum URL</a
                        >
                    </td>
                    <td>
                        <a style="color: orange" [href]="episode.url"
                            >Link Episodio</a
                        >
                    </td>
                </tr>
            </ng-template>
            <ng-template pTemplate="paginatorleft"> </ng-template>
            <ng-template pTemplate="paginatorright"> </ng-template>
        </p-table>
    </div>
    <p-scrollTop
        target="window"
        styleClass="custom-scrolltop"
        [threshold]="100"
        icon="pi pi-arrow-up"
    ></p-scrollTop>
</div>
