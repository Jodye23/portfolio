<p-dialog
    header="Header"
    [(visible)]="visible"
    [modal]="true"
    [style]="{ width: '30rem' }"
>
    <ng-template pTemplate="header">
        <div
            class="inline-flex align-items-center justify-content-center gap-2"
        >
            <span class="font-bold white-space-nowrap">Aggiungi libro</span>
        </div>
    </ng-template>
    <div class="formgrid grid justify-content-center">
        <form [formGroup]="newBookForm">
            <div class="field col">
                <label for="title">Titolo</label>
                <input
                    pInputText
                    id="title"
                    formControlName="title"
                    class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
                />
            </div>
            <div class="field col">
                <label for="author">Autore</label>
                <input
                    pInputText
                    id="author"
                    formControlName="author"
                    class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
                />
            </div>
            <div class="field col">
                <label for="publicationYear">Anno di pubblicazione</label>
                <input
                    pInputText
                    id="publicationYear"
                    formControlName="publicationYear"
                    class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
                />
            </div>
            <div class="field col">
                <label for="synopsis">Sinossi</label>
                <input
                    pInputText
                    id="synopsis"
                    formControlName="synopsis"
                    class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
                />
            </div>
            <div class="field col">
                <label for="imageUrl">Url copertina</label>
                <input
                    pInputText
                    id="imageUrl"
                    formControlName="imageUrl"
                    class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
                />
            </div>
        </form>
    </div>

    <ng-template pTemplate="footer">
        <p-button
            icon="pi pi-check"
            (click)="createBook()"
            label="Crea"
            pAutoFocus
            [autofocus]="true"
        ></p-button>
    </ng-template>
</p-dialog>

<div class="card">
    <div class="flex justify-content-center">
        <p-button
            (click)="openNewBookModal()"
            icon="pi pi-book"
            label="Aggiungi libro"
        ></p-button>
    </div>
    <div
        class="flex gap-6 flex-wrap align-items-center justify-content-center mt-3"
    >
        <div
            *ngFor="let book of books; let i = index"
            class="zoominup animation-duration-1000"
        >
            <div [style]="{ width: '22rem' }" class="card shadow-6">
                <div class="flex">
                    <div>
                        <img
                            alt="{{ book.title }}"
                            [src]="book.imageUrl"
                            style="width: 60px"
                        />
                    </div>
                    <div class="ml-7">
                        <h3>{{ book.title }}</h3>
                        <p>
                            <strong>{{ book.author }}</strong
                            ><small>({{ book.publicationYear }})</small>
                        </p>
                        <p><strong>Trama:</strong></p>
                        <p>
                            {{ book.synopsis }}
                        </p>
                    </div>
                </div>
                <div class="text-center pt-5">
                    <p-button
                        label="Modifica"
                        icon="pi pi-pencil"
                        (click)="openEditModal(i)"
                    ></p-button>
                    <p-button
                        label="Rimuovi"
                        icon="pi pi-times"
                        styleClass="p-button-secondary"
                        [style]="{ 'margin-left': '.5em' }"
                        (click)="removeBook(i)"
                    ></p-button>
                </div>
            </div>
        </div>
    </div>
    <div class="text-center mt-3">
        <p-button
            label="Torna alla libreria"
            [rounded]="true"
            (click)="backToHome()"
        ></p-button>
    </div>
</div>

<p-dialog
    header="Header"
    [(visible)]="editVisible"
    [modal]="true"
    [style]="{ width: '30rem' }"
>
    <ng-template pTemplate="header">
        <div
            class="inline-flex align-items-center justify-content-center gap-2"
        >
            <span class="font-bold white-space-nowrap">Modifica libro</span>
        </div>
    </ng-template>
    <div class="formgrid grid justify-content-center">
        <form [formGroup]="bookForm">
            <div class="field col">
                <label for="title">Titolo</label>
                <input
                    pInputText
                    id="title"
                    formControlName="title"
                    class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
                />
            </div>
            <div class="field col">
                <label for="author">Autore</label>
                <input
                    pInputText
                    id="author"
                    formControlName="author"
                    class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
                />
            </div>
            <div class="field col">
                <label for="publicationYear">Anno di pubblicazione</label>
                <input
                    pInputText
                    id="publicationYear"
                    formControlName="publicationYear"
                    class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
                />
            </div>
            <div class="field col">
                <label for="synopsis">Sinossi</label>
                <input
                    pInputText
                    id="synopsis"
                    formControlName="synopsis"
                    class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
                />
            </div>
            <div class="field col">
                <label for="imageUrl">Url copertina</label>
                <input
                    pInputText
                    id="imageUrl"
                    formControlName="imageUrl"
                    class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
                />
            </div>
        </form>
    </div>

    <ng-template pTemplate="footer">
        <p-button
            icon="pi pi-check"
            (click)="saveBook()"
            label="Salva"
            pAutoFocus
            [autofocus]="true"
        ></p-button>
    </ng-template>
</p-dialog>
